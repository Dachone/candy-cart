<!DOCTYPE html>
<html>
<head>
  <title>Candy Cart with Editable Stock</title>
  <style>
    body { font-family: Arial; padding: 20px; max-width: 900px; margin: auto; }
    .product-grid { display: flex; flex-wrap: wrap; gap: 20px; }
    .product { border: 1px solid #ccc; padding: 10px; width: 180px; text-align: center; border-radius: 8px; position: relative; }
    .product img { max-width: 100%; height: 100px; object-fit: cover; }
    .product input[type="number"] { width: 60px; text-align: center; margin-top: 5px; }
    .out-of-stock-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255,255,255,0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 4rem;
      color: red;
      font-weight: bold;
      border-radius: 8px;
      user-select: none;
    }
    .stock-info {
      font-size: 0.9rem;
      margin-top: 6px;
      font-weight: bold;
    }
    #controls {
      margin-top: 15px;
      display: flex;
      gap: 10px;
    }
    #controls button {
      padding: 6px 12px;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 5px;
      border: 1px solid #333;
      background-color: #f0f0f0;
      transition: background-color 0.2s;
    }
    #controls button:hover {
      background-color: #ddd;
    }
  </style>
</head>
<body>

<h2>üç≠ Candy Cart with Editable Stock</h2>

<div class="product-grid" id="productGrid"></div>

<div id="controls">
  <button id="restockBtn">üîÑ Restock All</button>
</div>

<script>
const originalProducts = [
  { name: "JOLLY RANCHER", price: 0.15, stock: 15, image: "https://tse1.mm.bing.net/th/id/OIP.eqLw1wDF9BjT6VWakX0wuAHaHa?rs=1&pid=ImgDetMain&o=7&rm=3" },
  { name: "Airheads", price: 0.50, stock: 20, image: "https://uploads.dailydot.com/2022/10/airheads.jpg?q=65&auto=format&w=2270&ar=2:1&fit=crop" },
  { name: "Welch's Fruit Snacks", price: 0.50, stock: 12, image: "https://i.pinimg.com/originals/f7/32/cc/f732cc7958c6656cd8d9daf96d7c9652.jpg" },
  { name: "Takis", price: 1.00, stock: 8, image: "https://i.etsystatic.com/38128153/r/il/f9445b/4732450641/il_fullxfull.4732450641_3vfa.jpg" },
  { name: "SOUR PATCH KIDS Watermelon", price: 2.00, stock: 5, image: "https://m.media-amazon.com/images/I/81FYrcGFRfL.jpg" },
  { name: "SKITTLES Sours", price: 2.00, stock: 10, image: "https://i5.walmartimages.com/asr/0bb0f181-88de-46df-88e8-ced5c60db22b_1.a41b01d7e2407b65bf8005277e98c291.jpeg" },
  { name: "SWEDISH FISH", price: 1.50, stock: 9, image: "https://meaningfuleats.com/wp-content/uploads/2022/09/gluten-free-swedish-fish.jpg" },
  { name: "HERSHEY'S", price: 2.00, stock: 14, image: "https://th.bing.com/th/id/R.323ed0e5f9ca67573b1f704a7b3f3e72?rik=xk1ckBRXfHlgQw&riu=http%3a%2f%2fs7d2.scene7.com%2fis%2fimage%2fhersheysassets%2f0_34000_00240_5_701_24000_097_Item_Front%3ffmt%3dpng-alpha%26hei%3d1500&ehk=ZVhZLDh4tbNHoll9PbNA0s7ytV2mZWNoN3W9IlWgjo8%3d&risl=&pid=ImgRaw&r=0" },
  { name: "KIT KAT", price: 1.50, stock: 11, image: "https://wallpapers.com/images/hd/opened-kit-kat-chocolate-ic05ef6cdkwdz4in.jpg" },
  { name: "REESE'S", price: 2.00, stock: 7, image: "https://i5.walmartimages.com/asr/ccb157fa-b043-461c-92c9-efa2d33a0d4e_1.1c2b59765c29a0cc842b2c9de174c5f2.jpeg" },
  { name: "Airheads Xtremes Belts", price: 2.50, stock: 6, image: "https://m.media-amazon.com/images/I/81jNssNuIBL.jpg" },
  { name: "Nabisco Cookies Variety Pack", price: 1.00, stock: 13, image: "https://images.freshop.com/00044000074869/fcf61702c947fee4563f7f5215e86b9b_large.png" }
];

let products = [];

function loadState() {
  const saved = localStorage.getItem('products');
  products = saved ? JSON.parse(saved) : JSON.parse(JSON.stringify(originalProducts));
}

function saveState() {
  localStorage.setItem('products', JSON.stringify(products));
}

function renderProducts() {
  const grid = document.getElementById('productGrid');
  grid.innerHTML = '';

  products.forEach((product, i) => {
    const outOfStock = product.stock <= 0;
    const div = document.createElement('div');
    div.className = 'product';
    div.innerHTML = `
      <img src="${product.image}" alt="${product.name}">
      <div><strong>${product.name}</strong></div>
      <div>$${product.price.toFixed(2)}</div>
      <label>Stock: <input type="number" min="0" value="${product.stock}" id="stockInput-${i}"></label>
      ${outOfStock ? '<div class="out-of-stock-overlay">X</div>' : ''}
    `;
    grid.appendChild(div);

    const input = div.querySelector(`#stockInput-${i}`);
    input.addEventListener('input', () => {
      const val = parseInt(input.value);
      products[i].stock = isNaN(val) || val < 0 ? 0 : val;
      saveState();
      renderProducts();
    });
  });
}

function restockAll() {
  if (confirm("Restock all products to original amounts?")) {
    products = JSON.parse(JSON.stringify(originalProducts));
    saveState();
    renderProducts();
  }
}

document.getElementById('restockBtn').addEventListener('click', restockAll);

loadState();
renderProducts();
</script>

</body>
</html>
